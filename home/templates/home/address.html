{% extends 'base.html' %}
{% block styles %}
<style>

</style>
{% endblock %}
{% block content %}
<select id="selectCity">
    <option value="0">請選擇</optiot>
   
    </select>
<div id="div1"></div>
{% endblock %}
{% block scripts %}
<script>
 const selCity = document.querySelector('#selectCity');
 const divInfo = document.querySelector('#div1');
 (async ()=>{
    //call api 取得 JSON 資料
   const response = await fetch('/api/cities/')
   const cities = await response.json()
    //console.log(cities)

    //讀取 JSON 資料  
    // const optsArray = cities.map((city)=>{
    //     return(
    //       `<option value="${city}">${city}</option>`
    //     )
    // })   
    const optsArray = cities.map((city,index) => `<option value="${city}">${index}-${city}</option>`)  
    //將資料顯示在網頁上
    //selCity.innerHTML = optsArray.join("")
    //BeforeEnd 結束標籤</select>的前面
    selCity.insertAdjacentHTML('BeforeEnd', optsArray.join(""))
 })();

 selCity.addEventListener('change',()=>{
    // const idx = selCity.selectedIndex
    // console.log(idx)
    // `${selCity.options[idx].text}：${selCity.options[idx].value}`
    divInfo.innerHTML = selCity.value
 })
</script>
{% endblock %}